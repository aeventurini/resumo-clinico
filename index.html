<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Resumo Cl√≠nico de Exames</title>

<style>
body { font-family: Arial, sans-serif; background:#f4f6f8; padding:20px; }
h1 { margin-bottom:5px; }
.subtitle { font-size:15px; color:#444; margin-bottom:15px; }
.price { background:#e8f1ff; border-left:5px solid #2b6cb0; padding:12px; font-size:16px; margin-bottom:15px; }
.section { background:#fff; padding:15px; margin-top:15px; border-radius:6px; }
textarea { width:100%; height:180px; }
input { padding:8px; width:260px; }
button { padding:8px 16px; margin-top:8px; cursor:pointer; }
.output { background:#eef2f5; padding:10px; border-radius:4px; font-weight:bold; user-select:all; }
.help { background:#f9fafb; border-left:4px solid #4a90e2; padding:10px; margin-bottom:10px; font-size:14px; }
.notice { background:#fff6e5; border-left:4px solid #f0ad4e; padding:10px; font-size:13px; margin-top:15px; }
footer { margin-top:25px; font-size:12px; color:#555; line-height:1.5; }
</style>
</head>

<body>

<h1>Resumo Cl√≠nico de Exames</h1>
<div class="subtitle">
Ferramenta de apoio √† escrita m√©dica para plant√£o e rotina cl√≠nica.
</div>

<div class="price">
<b>Assinatura anual:</b> R$ 99,00
</div>

<div class="notice">
<b>Aviso:</b> Ferramenta de apoio √† organiza√ß√£o e escrita m√©dica.
N√£o realiza diagn√≥stico, n√£o sugere tratamento e n√£o substitui julgamento cl√≠nico.
</div>

<!-- TELA DE ATIVA√á√ÉO -->
<div class="section" id="ativacao">
<b>Ativa√ß√£o anual (CPF)</b><br>
<input id="cpf" placeholder="Digite seu CPF">
<button onclick="ativar()">Ativar</button>
<p style="font-size:12px;color:#666">
O CPF √© utilizado apenas como chave t√©cnica (hash). Nenhum dado cl√≠nico √© armazenado.
</p>
</div>

<!-- APP (COME√áA OCULTO) -->
<div class="section" id="app" style="display:none">

<div class="help">
<b>Como usar:</b><br>
1Ô∏è‚É£ Abra a <b>aba de exames</b> no MV<br>
2Ô∏è‚É£ Pressione <b>Ctrl + A</b><br>
3Ô∏è‚É£ Pressione <b>Ctrl + C</b><br>
4Ô∏è‚É£ Cole abaixo (<b>Ctrl + V</b>)<br>
5Ô∏è‚É£ Clique em <b>Gerar resumo</b>
</div>

<textarea id="texto"></textarea>
<br>
<button onclick="processar()">Gerar resumo</button>

<p><b>üìã Exames para evolu√ß√£o:</b></p>
<div id="linha" class="output"></div>
<button onclick="copiar()">üìã Copiar</button>

<p><b>üß† Organiza√ß√£o dos exames:</b></p>
<div id="interp"></div>

<div class="notice">
A interpreta√ß√£o final e qualquer conduta cl√≠nica s√£o de responsabilidade exclusiva do profissional.
</div>

</div>

<footer>
<b>Pix para assinatura:</b> aeventurini@gmail.com<br><br>
Processamento 100% local no navegador, sem acesso a sistemas hospitalares ou transmiss√£o de dados.
</footer>

<script>
function normalizarCPF(cpf){
  return cpf.replace(/\D/g,"");
}

function ativar(){
  const cpf = normalizarCPF(document.getElementById("cpf").value);
  if(cpf.length !== 11){
    alert("CPF inv√°lido");
    return;
  }

  // Ativa SOMENTE ap√≥s clicar
  document.getElementById("ativacao").style.display = "none";
  document.getElementById("app").style.display = "block";
}

function processar(){
  const t=document.getElementById("texto").value.toUpperCase();
  let exames=[];

  function pegar(r){
    const m=t.match(r);
    if(!m) return null;
    return m[1].replace(",",".");
  }

  function add(n,v){ exames.push(`${n} ${v}`); }

  let hb=pegar(/HEMOGLOBINA\s+([\d,]+)/); if(hb) add("Hb",hb);
  let ht=pegar(/HEMAT[√ìO]CRITO\s+([\d,]+)/); if(ht) add("Ht",ht+"%");
  let leuc=pegar(/LEUC[√ìO]CITOS\s+([\d\.]+)/); if(leuc) add("Leuc",leuc);
  let seg=pegar(/SEGMENTAD[OA]S?\s+([\d,]+)/); if(seg) add("Seg",seg+"%");
  let bast=pegar(/BAST[√ïO]ES?\s+([\d,]+)/); if(bast) add("Bast",bast+"%");
  let linf=pegar(/LINF[√ìO]CITOS\s+([\d,]+)/); if(linf) add("Linf",linf+"%");
  let eos=pegar(/EOSIN[√ìO]FILOS\s+([\d,]+)/); if(eos) add("Eos",eos+"%");
  let plaq=pegar(/PLAQUETAS\s+([\d\.]+)/); if(plaq) add("Plaq",plaq);

  let ureia=pegar(/UR[√âE]IA\s+([\d,]+)/); if(ureia) add("Ureia",ureia);
  let cr=pegar(/CREATININA\s+([\d,]+)/); if(cr) add("Cr",cr);
  let pcr=pegar(/(PCR|PROTE[I√ç]NA C REATIVA)\s+([\d,]+)/); if(pcr) add("PCR",pcr);

  document.getElementById("linha").innerText=exames.join(" | ");
  document.getElementById("interp").innerText=
    exames.length ? "Exames organizados conforme solicitado." : "Nenhum exame reconhecido.";
}

function copiar(){
  navigator.clipboard.writeText(document.getElementById("linha").innerText);
  alert("Exames copiados!");
}
</script>

</body>
</html>
